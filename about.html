<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>LL's site</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='main.css'>
    <link rel="icon" href="/img/oneshotsun.ico">
  </head>
 
<body>
    <div id="navbar">
          <a href="javascript:void(0);" class="icon" onclick="navExpand()"><i class="fa fa-bars"></i></a>
          <a href="index">Main Page</elements>
          <a class="active" href="javascript:void(0)">About Me</elements>
          <a href="awards">Awards</elements>
        <span class="navsocial">
          <a class="navsocial" href="https://instagram.com/htrowii"><i class="fab fa-instagram"></i></a>
          <a class="navsocial" href="https://github.com/hrtowii"><i class="fab fa-github"></i></a>
        </span>
    </div>
    
    <div class="content">
        <p>Tethered Downgrade Guide
            By Mineek</p>
            <p>discord: Mineek#6323</p>
            <p>This tutorial was made in half an hour, its really bad but should get you started on your tethered downgrade adventure!</p>
            <p>Note: A10+ Devices DONT have kpp! (YOU CAN STILL DOWNGRADE, JUST SKIP THE KPP PARTS!
            like instead of: </p>
            <pre><code>pyimg4 im4p extract -i kernelcache -o kcache.raw --extra kpp.bin
            </code></pre>
            <p>you do: </p>
            <pre><code>pyimg4 im4p extract -i kernelcache -o kcache.raw
            </code></pre>
            <p>HUGE THANKS TO <strong>galaxy#6181</strong>. Without him, I wouldn&#39;t have known all this to write a guide!</p>
            <h1 id="requirements">REQUIREMENTS:</h1>
            <ul>
            <li>irecovery</li>
            <li>futurerestore</li>
            <li>pyimg4 (pip3 install pyimg4) (<strong>MAKE SURE YOU UPDATED PYTHON AND NOT USING THE BUNDLED ONE!</strong>)</li>
            <li>iBoot64patcher (<a href="https://github.com/Cryptiiiic/iBoot64Patcher">https://github.com/Cryptiiiic/iBoot64Patcher</a>)</li>
            <li>Kernel64patcher (<a href="https://github.com/iSuns9/Kernel64Patcher">https://github.com/iSuns9/Kernel64Patcher</a>)</li>
            <li>img4tool (<a href="https://github.com/tihmstar/img4tool">https://github.com/tihmstar/img4tool</a>)</li>
            <li>img4 (<a href="https://github.com/xerub/img4lib">https://github.com/xerub/img4lib</a>)</li>
            <li>ldid (<a href="https://github.com/ProcursusTeam/ldid">https://github.com/ProcursusTeam/ldid</a>)</li>
            <li>restored_external64_patcher (<a href="https://github.com/iSuns9/restored_external64patcher">https://github.com/iSuns9/restored_external64patcher</a>)</li>
            <li>asr64_patcher (<a href="https://github.com/exploit3dguy/asr64_patcher">https://github.com/exploit3dguy/asr64_patcher</a>)</li>
            </ul>
            <p><strong>Make sure to use the forks listed above.</strong></p>
            <h1 id="downgrade-portion">Downgrade portion:</h1>
            <ol>
            <li><p>Grab yourself your ipsw for iOS 14.3</p>
            </li>
            <li><p>Extract it and grab yourself your kernel cache and restore_ramdisk</p>
            </li>
            <li><p>Extract the restore_ramdisk with: img4 -i restore_ramdisk -o ramdisk.dmg</p>
            </li>
            <li><p>Mount it: </p>
            <pre><code> mkdir ramdisk &amp;&amp; hdiutil attach ramdisk.dmg -mountpoint ramdisk
            </code></pre>
            </li>
            <li><p>patch the ASR in the ramdisk: </p>
            <pre><code> asr64_patcher ramdisk/usr/sbin/asr patched_asr
            </code></pre>
            </li>
            <li><p>resign it:</p>
            <pre><code> ldid -e ramdisk/usr/sbin/asr &gt; ents.plist
             ldid -Sents.plist patched_asr
            </code></pre>
            </li>
            <li><p>Grab your restored_external: </p>
            <pre><code> cp ramdisk/usr/local/bin/restored_external .
            </code></pre>
            </li>
            <li><p>Patch it: </p>
            <pre><code> restored_external64_patcher restored_external restored_external_patched
            </code></pre>
            </li>
            <li><p>Extract the ents: </p>
            <pre><code> ldid -e restored_external &gt; restored_externel_ents.plist
            </code></pre>
            </li>
            <li><p>Remove the old ones: </p>
            <pre><code>rm ramdisk/usr/sbin/asr &amp;&amp; rm ramdisk/usr/local/bin/restored_external
            </code></pre>
            </li>
            <li><p>Resign it: </p>
            <pre><code>ldid -Srestored_externel_ents.plist restored_external_patched
            </code></pre>
            </li>
            <li><p>chmod them: </p>
            <pre><code>chmod -R 755 restored_external_patched
            chmod -R 755 patched_asr
            </code></pre>
            </li>
            <li><p>Copy them back: </p>
            <pre><code>cp -a restored_external_patched ramdisk/usr/local/bin/restored_external
            cp -a patched_asr ramdisk/usr/sbin/asr
            </code></pre>
            </li>
            <li><p>Detach from the ramdisk: </p>
            <pre><code>hdiutil detach ramdisk
            </code></pre>
            </li>
            <li><p>Rebuild the ramdisk (dont sign it tho, futurerestore will):</p>
            <pre><code>pyimg4 im4p create -i ramdisk.dmg -o ramdisk.im4p -f rdsk
            </code></pre>
            </li>
            <li><p>Extract the kernel:</p>
            <pre><code>pyimg4 im4p extract -i kernelcache -o kcache.raw --extra kpp.bin
            </code></pre>
            </li>
            </ol>
            <p>(leave out --extra kpp.bin if you dont have kpp)</p>
            <ol start="17">
            <li><p>Patch it: </p>
            <pre><code>Kernel64Patcher kcache.raw krnl.patched -f -a
            </code></pre>
            </li>
            <li><p>Rebuild the kernel:</p>
            <pre><code>pyimg4 im4p create -i krnl.patched -o krnl.im4p --extra kpp.bin -f rkrn --lzss (leave out --extra kpp.bin if you dont have kpp)
            </code></pre>
            </li>
            <li><p>You can now restore with futurerestore via this command (blob can be for ANY version):</p>
            </li>
            </ol>
            <p><strong>(MAKE SURE YOU ARE IN PWNDFU WITH SIGCHECKS REMOVED!)</strong></p>
            <pre><code>    futurerestore -t shsh.shsh2 --use-pwndfu --skip-blob --rdsk ramdisk.im4p --rkrn krnl.im4p --latest-sep --latest-baseband ipsw.ipsw
            </code></pre>
            <p>Boot portion:</p>
            <ol>
            <li><p>Prepare your ibss, ibec, devicetree, rootfs_trustcache and kernelcache.</p>
            </li>
            <li><p>Prepare your iv keys for ibss and ibec.</p>
            </li>
            <li><p>decrypt ibss and ibec:</p>
            <pre><code> img4 -i ibss -o ibss.dmg -k ibss_ivkey
             img4 -i ibec -o ibec.dmg -k ibec_ivkey
            </code></pre>
            </li>
            <li><p>Patch them:</p>
            <pre><code> iBoot64Patcher ibss.dmg ibss.patched
             iBoot64Patcher ibec.dmg ibec.patched -b &quot;-v&quot;
            </code></pre>
            </li>
            <li><p>Repack them with your IM4M (you can get it by doing this: img4tool -e -s yourshsh.shsh2 -m IM4M)</p>
            <pre><code> img4 -i ibss.patched -o ibss.img4 -M IM4M -A -T ibss
             img4 -i ibec.patched -o ibec.img4 -M IM4M -A -T ibec
            </code></pre>
            </li>
            <li><p>Sign your devicetree and rootfs_trustcache: (and also the firmware files in the ipsw)</p>
            <pre><code> img4 -i devicetree -o devicetree.img4 -M IM4M -T rdtr
             img4 -i rootfs_trustcache -o rootfs_trustcache.img4 -M IM4M -T rtsc
            </code></pre>
            </li>
            <li><p>Extract the kernelcache:</p>
            <pre><code> pyimg4 im4p extract -i kernelcache -o kcache.raw --extra kpp.bin
            </code></pre>
            </li>
            </ol>
            <p>(leave out --extra kpp.bin if you dont have kpp)</p>
            <ol start="8">
            <li>Patch it</li>
            </ol>
            <ul>
            <li><p>the reason we don&#39;t use amfi patches is because jailbreak doesnt work anymore if you use amfi patches. </p>
            </li>
            <li><p>Make sure to DO amfi patches when restoring tho. </p>
            <pre><code>  Kernel64Patcher kcache.raw krnlboot.patched -f
            </code></pre>
            </li>
            </ul>
            <ol start="9">
            <li><p>Repack it:</p>
            <pre><code> pyimg4 im4p create -i krnlboot.patched -o krnlboot.im4p --extra kpp.bin -f rkrn --lzss
             pyimg4 img4 create -p krnlboot.im4p -o krnlboot.img4 -m IM4M
            </code></pre>
            </li>
            <li><p>Boot:</p>
            </li>
            </ol>
            <p><strong>(MAKE SURE YOU USE IPWNDFU TO ACTIVATE, IF YOU USE GASTER YOU CANNOT ACTIVATE THE DEVICE!)</strong></p>
            <pre><code>    irecovery -f iBSS.img4
                irecovery -f iBEC.img4
            </code></pre>
            <h2 id="if-you-have-a10-or-higher-use-this">If you have a10 or higher use this:</h2>
            <h2 id="irecovery--c-go">irecovery -c go</h2>
            <pre><code>irecovery -f devicetree.img4
            irecovery -c devicetree
            # if you have firmware add them here like this:
            # MAKE SURE TO SIGN THEM!
            # irecovery -f yourfirmware.img4
            # irecovery -c firmware
            irecovery -f aop.img4
            irecovery -c firmware
            irecovery -f rootfs_trustcache.img4
            irecovery -c firmware
            irecovery -f krnlboot.img4
            irecovery -c bootx
            </code></pre>            
    </div>
    </div>

    <script type="application/javascript">
        window.onscroll = function() {stickyNavbar()};
        window.onresize = function() {reInitVars()};
        window.onload   = function() {reInitVars(); titleSeq()};
        
        var sticky;
        var navbar = document.getElementById("navbar");
        var title = document.getElementById("title");

        function titleSeq() {
            title.innerHTML = "Lucas";
        }
        
        function reInitVars() {
            sticky = window.innerHeight;
        }
        
        function stickyNavbar() {
            if (window.pageYOffset >= sticky) {
                navbar.classList.add("sticky")
            } else {
                navbar.classList.remove("sticky");
            }
           
        }

        function navExpand() {
            if (navbar.classList.contains("dropped")) {
                navbar.classList.remove("dropped")
            } else {
                navbar.classList.add("dropped");
            }
        } 
    </script>

</html>
